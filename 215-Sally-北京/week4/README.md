### 边缘提取
1. 边缘
    1. 定义：灰度急剧变化
    2. 求边缘幅度的算法：soble、prewitt、laplace、Canny，其中Canny算子效果最好，也最复杂
    3. 高频信号 & 低频信号
        1. 高频分量指的是强度(亮度/灰度)变化剧烈的地方，也就是边缘/轮廓
        2. 人眼对高频信号更敏感
    4. 边缘检测的原理和步骤
        1. 步骤
            1. 滤波/卷积
                1. 降噪，去除噪声对边缘的影响
                2. 常见方法：高斯滤波
                3. 基于图像强度的一阶、二阶导数
            2. 增强
                1. 与第一步滤波相反
                2. 通过计算梯度幅值来确定
            3. 检测
                1. 对突变点取舍，例如脸上的皱纹不应被检测为脸部边缘
                2. 通过阈值化方法来检测
        2. 原理：费马引理——即在边缘部分求
            1. 一阶导数：出现极值
            2. 二阶导数：为0
            3. 因为图像是二维，所以需要在两个方向求导
    5. 应用
        1. 图像锐化
            1. 常用：拉普拉斯卷积核，突出中心点与周围点的差异
        2. 图像平滑
            1. 突出低频成分，使图像亮度平缓渐变
            2. 常用：
                1. prewitt算子，原理与sobel算子一样，有x、y两个方向的算子；sobel有些边缘点的加权，prewitt没有加权
                2. sobel算子没有严格的模拟人的视觉生理特征，无差别的提取轮廓，提取的图像轮廓有时不能令人类满意
    6. Canny边缘检测算法
        1. 目前最优秀的边缘检测算法之一，目标是找出一个最优边缘
        2. 最优边缘的定义：
            1. 好的检测：找出全部边缘
            2. 好的定位：尽可能接近实际边缘
            3. 最小响应：一个边缘只标记一次
        3. 步骤
            1. 灰度化
            2. 高斯滤波
                1. 高斯卷积核大小会影响 Canny 检测器的性能，原因：滤波、边缘检测互相矛盾
                2. 尺寸越大，检测器对噪声的敏感度越低，但是对边缘检测的定位误差也略有增加，一般 trade off(折衷) 选5 * 5
            3. 检图像中的水平、垂直和对角边缘(如Prewitt、Sobel算子等)
            4. 对梯度幅值进行非极大值抑制——消除冗余边缘，通俗理解即把重复画的圈删掉
                1. 非极大值抑制算法，简称NMS算法(Non-Maximum Suppression)
                2. 算法思想：搜索局部最大值，抑制非极大值
                3. NMS算法在不同应用中的具体实现不太一样，但思想是一样的
                4. 做法：寻找像素点局部最大值，将非极大值对应的灰度置为0，这样就可以剔除掉一大部分非边缘的点
                    1. 梯度的意义：导数变化最快的方向
                    2. 局部的意思：中心点周围的8个点，排列起来是一个3 x 3的kernel 
                    3. 梯度投影线与8邻域边框的交点，与中心点C比较，若C点最大则留下，否则C被抑制，即：将当前像素的梯度强度沿正负梯度方向上的两个像素进行比较
                    4. 3中的交点(也可以叫亚像素点、虚拟像素点)用双线性插值算法求
            5. 用双阈值算法检测和连接边缘
                1. 双阈值算法检测(滞后阈值)
                    1. 背景：完成非极大值抑制后，会得到一个二值图像(非边缘点灰度值为0，边缘为128)，这样的结果是包含了噪声和假边缘，需要进一步处理
                    2. 双阈值检测：检测的是边缘像素的梯度值，阈值选取取决于输入图像的内容
                        1. 大于 高阈值 -> 强边缘
                        2. 介于 高阈值 - 低阈值 -> 弱边缘
                        3. 小于 低阈值 -> 会被抑制
                    3. 处理第2步中的弱边缘争议
                        1. 真是边缘引起的弱边缘像素将连接到强边缘像素，而噪声是孤立的
                        2. 查看弱边缘像素及其8个邻域像素，只要其中一个为强边缘像素，则该弱边缘提升为强边缘，否则被抑制
                    4. 阈值设置经验(阈值是没有公式的，根据需求)：
                        1. 低阈值越小，保留的细节就越多
                        2. 高阈值越大，保留的细节就越多
        4. Canny的核心检测是Sobel算法，只是在Sobel前面加了两步，后面加了两步，使得结果更加准确
### 相机模型
1. 小孔成像模型
    1. 坐标系
        1. 世界坐标系的坐标为Pw(Xw, Yw, Zw)，即P点的地理位置，坐标系原点是地球圆心
        2. 对应的摄像机坐标系Po(x, y, z)，坐标系原点是光心，Pw 和Po 是同一个点在不同坐标系下的表示
        3. 对应的图像物理坐标系的坐标P'(x', y')，即小孔成像点的坐标，原点是成像平面的中心
        4. 对应的图像像素坐标系的坐标p(u, v)
            1. 前3个坐标系的单位都是长度单位，像素坐标的单位是(个)，表示像素的个数
            2. 原点：图像的左上角
            3. 从世界坐标系到像素坐标系的坐标转换：
                1. 3维坐标转2维坐标
                2. 单位转换
                3. 坐标系中的转换：旋转、平移
    2. 坐标系转换：使用齐次坐标(提升一个维度)
        1. 世界坐标系 -> 摄像机坐标系：使用欧式变换
            1. 欧式变换：a' = Ra + t
                1. 旋转: 旋转矩阵R
                2. 平移: 平移矩阵t
                3. 使用矩阵的原因：防止多次欧式变换产生嵌套，应使用齐次坐标
                4. 齐次坐标
        2. 摄像机坐标系 -> 图像物理坐标系：降维投影
            1. 原理：相似三角形
        3. 图像物理坐标系 -> 图像像素坐标系：单位转换
    3. 相机模型存在的问题：相机畸变
2. 相机畸变
    1. 镜头畸变
        1. 来源：透镜精度、组装工艺等引入的偏差，导致原始图像的失真
        2. 分类
            1. 径向畸变：由透镜形状引起，离光心越远，径向位移越大，沿着半径方向均匀的畸变，更常见
                1. 枕型畸变：中间往里凹
                2. 桶形畸变：中间往外凸
            2. 切向畸变：透镜与相机传感器平面(成像平面)或图像平面不平行导致
                1. 属于安装偏差
                2. 离光心越远畸变越大，但不是沿直径方向平均畸变的
        2. 畸变矫正
            1. 正确性的保证？
                1. 已知量：存在畸变的照片
                2. 预期：人类心目中的结果
            2. 要做的：
                1. 找到映射关系，把原图点映射到目标图片上
                2. 不新增点，制作映射
            3. 透视变换(或投影映射)
                1. 畸变矫正只是透视变换的应用之一，透视变换还可以用在其他地方
                2. 仿射变换：又称仿射映射，是指在几何中，图像进行从一个向量空间进行一次线性变换和一次平移，变换到另一个向量空间的过程
                3. 怎么做：
                    1. 通用公式
                        1. 求得变换矩阵
                            1. 找9个点，列9个方程，求出变换矩阵中9个未知数的值
                            2. 可另a33(右下角)等于1，降为8个未知数，取8个点(原图和目标图两两对应的4组点，每组两个点)带入
                        2. 齐次坐标，二维的Z需要变换为1

